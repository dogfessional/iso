"use strict";var _createClass=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(e,t.key,t)}}return function(r,n,t){if(n)e(r.prototype,n);if(t)e(r,t);return r}}();function _classCallCheck(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}var KEY_NAME="data-iso-key";var defaultRenderer={markup:function(){function e(e,r){if(!e)return"";return"<div "+KEY_NAME+'="'+String(r)+'">'+String(e)+"</div>"}return e}(),data:function(){function e(e,r){if(!e)return"";return'<script type="application/json" '+KEY_NAME+'="'+String(r)+'">'+String(e)+"</script>"}return e}()};var defaultSelector=function e(){var e=document.querySelectorAll("["+KEY_NAME+"]");return Array.prototype.reduce.call(e,function(e,r){var n=r.getAttribute(KEY_NAME);if(!e[n])e[n]={};if(r.nodeName==="SCRIPT"){try{var t=JSON.parse(r.innerHTML);e[n].state=t}catch(a){e[n].state={}}}else{e[n].node=r}return e},{})};module.exports=function(){function e(){var r=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var n=arguments.length<=1||arguments[1]===undefined?defaultRenderer:arguments[1];_classCallCheck(this,e);this.name=r;this.renderer=n;this.html=[];this.data=[]}_createClass(e,[{key:"add",value:function(){function e(e){var r=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var n=JSON.stringify(r);this.html.push(e);this.data.push(n);return this}return e}()},{key:"render",value:function(){function e(){var e=this;var r=this.html.reduce(function(r,n,t){var a=String(e.name)+"_"+String(t);return r+e.renderer.markup(n,a,e.name)},"");var n=this.data.reduce(function(r,n,t){var a=String(e.name)+"_"+String(t);return r+e.renderer.data(n,a,e.name)},"");return String(r)+"\n"+String(n)}return e}()}],[{key:"render",value:function(){function r(r){var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var t=arguments.length<=2||arguments[2]===undefined?"":arguments[2];var a=arguments.length<=3||arguments[3]===undefined?defaultRenderer:arguments[3];return new e(t,a).add(r,n).render()}return r}()},{key:"bootstrap",value:function(){function e(e){var r=arguments.length<=1||arguments[1]===undefined?defaultSelector:arguments[1];if(!e)return;var n=r();Object.keys(n).forEach(function(r){var t=n[r];var a=t.state;var u=t.node;e(a,u,r)})}return e}()}]);return e}();
